<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <title>Tabela</title>
</head>

<body>
  <div class="container mt-3">
    <table class="table table-striped table-hover table-bordered">
      <thead class="text-center">
        <tr>
          <th style="width: 40%;"> LIVRO </th>
          <th> VALOR ORIGINAL </th>
          <th> DATA INICIAL </th>
          <th> MELHOR VALOR </th>
          <th> DATA M. V. </th>
          <th> PERCENTUAL </th>
          <th> ÚLTIMO VALOR </th>
          <th> ÚLTIMA DATA </th>
          <th> % ATUAL </th>
        </tr>
      </thead>
      <tbody>
        <% if(orderedList.length) { %>
          <% for(let book of orderedList) { %>
            <% if(Number(updatedList[book].percentage) > 40) { %>
              <tr class="table-success">
            <% } else if (Number(updatedList[book].percentage) > 30) { %>
              <tr class="table-primary">
            <% } else if (Number(updatedList[book].percentage)> 20) { %>
              <tr class="table-warning">
            <% } else { %>
              <tr>
            <% } %>
              <% for(let item in updatedList[book]) { %>
                <% if(item=='title' ) { %>
                  <td>
                    <%= updatedList[book][item] %>
                  </td>
                <% } else { %>
                  <td class="text-center">
                    <%= updatedList[book][item] %>
                  </td>
                <% } %>
              <% } %>
            </tr>
           <% } %>
        <% } else { %>

          <% for(let book in updatedList) { %>
            <tr>
              <% for(let item in updatedList[book]) { %>
                <% if(item=='title' ) { %>
                  <td>
                    <%= updatedList[book][item] %>
                  </td>
                <% } else { %>
                  <td class="text-center">
                    <%= updatedList[book][item] %>
                  </td>
                <% } %>
              <% } %>
            </tr>
          <% } %>
        <% } %>

      </tbody>
    </table>

    <p class="text-end fs-5"> Total de livros: <%= Object.keys(updatedList).length %>
    </p>

  </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
  integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
  integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
<script src="/js/bootstrap.min.js"></script>

</html>